{
  "mcpServers": {
    "claude-flow": {
      "command": "sh",
      "args": [
        "-c",
        "npx -y @claude-flow/cli@latest mcp start 2>/tmp/.cf-err.$$ || { if grep -qE 'ENOTEMPTY|ECOMPROMISED' /tmp/.cf-err.$$ 2>/dev/null; then rm -rf ~/.npm/_npx ~/.npm/_cacache 2>/dev/null; exec npx -y @claude-flow/cli@latest mcp start; else cat /tmp/.cf-err.$$ >&2; exit 1; fi; }"
      ],
      "env": {
        "npm_config_prefer_online": "true",
        "npm_config_update_notifier": "false",
        "CLAUDE_FLOW_MODE": "v3",
        "CLAUDE_FLOW_HOOKS_ENABLED": "true",
        "CLAUDE_FLOW_TOPOLOGY": "hierarchical-mesh",
        "CLAUDE_FLOW_MAX_AGENTS": "15",
        "CLAUDE_FLOW_MEMORY_BACKEND": "hybrid"
      },
      "autoStart": false
    }
  }
}